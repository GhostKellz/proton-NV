# Proton-NV Configuration
# NVIDIA-optimized Proton for RTX 40/50 + Open Kernel Module 580+
#
# These environment variables are automatically applied when using Proton-NV
# They can be overridden per-game in Steam launch options

##
## DXVK Settings (DX9/10/11 -> Vulkan)
##

# Enable async shader compilation (reduces stuttering)
DXVK_ASYNC=1

# Shader cache path - can be shared across prefixes
# DXVK_STATE_CACHE_PATH=~/.cache/proton-nv/dxvk

# Enable HUD (uncomment to show)
# DXVK_HUD=fps,frametimes,gpuload

# Frame rate limit (0 = unlimited)
DXVK_FRAME_RATE=0

# Use NVIDIA-specific optimizations
DXVK_NVAPI=1

##
## vkd3d-proton Settings (DX12 -> Vulkan)
##

# Shader cache path
# VKD3D_SHADER_CACHE_PATH=~/.cache/proton-nv/vkd3d

# Debug/HUD options
# VKD3D_DEBUG=none

##
## NVIDIA Reflex / Low Latency
##

# Enable VK_NV_low_latency2 support
PROTON_ENABLE_NVAPI=1
DXVK_ENABLE_NVAPI=1

# Enable Reflex (requires game support)
# Games with Reflex: Fortnite, Valorant, Apex Legends, Overwatch 2, etc.
PROTON_ENABLE_REFLEX=1

##
## Wine/Proton Settings
##

# Use esync/fsync for improved synchronization
PROTON_NO_ESYNC=0
PROTON_NO_FSYNC=0

# Enable gamemode integration (if installed)
# Requires gamemode: https://github.com/FeralInteractive/gamemode
# PROTON_USE_GAMEMODE=1

# Large address aware (for 32-bit games needing >2GB)
PROTON_FORCE_LARGE_ADDRESS_AWARE=1

# Hide Wine version from games (compatibility)
PROTON_HIDE_NVIDIA_GPU=0

##
## NVIDIA Open Driver Optimizations (580+)
##

# Force use of open kernel module paths
__GL_YIELD=USLEEP

# Threaded optimization
__GL_THREADED_OPTIMIZATIONS=1

# Shader disk cache
__GL_SHADER_DISK_CACHE=1
__GL_SHADER_DISK_CACHE_SKIP_CLEANUP=1

# Allow Vulkan surface flinger bypass
__GL_VRR_ALLOWED=1

# NVIDIA specific Vulkan tweaks
VK_LAYER_NV_optimus=NVIDIA_only

##
## CachyOS / Linux-tkg BORE Scheduler Tuning
##

# These work best with CachyOS kernel or linux-tkg with BORE scheduler
# They help reduce latency and improve frame pacing

# Increase priority for game threads
# PROTON_NICE=-5

# CPU affinity (uncomment and adjust for your CPU)
# PROTON_CPU_AFFINITY=0-7

# Disable CPU frequency scaling during gaming (requires root)
# PROTON_DISABLE_CPU_SCALING=1

##
## Memory Settings
##

# BAR1 aware allocator for RTX 40/50
# Enables better VRAM utilization with resizable BAR
PROTON_BAR1_AWARE=1

# Large pages (requires system configuration)
# PROTON_USE_LARGE_PAGES=1

##
## Debugging (disabled by default)
##

# PROTON_LOG=1
# PROTON_DUMP_DEBUG_COMMANDS=1
# WINEDEBUG=-all
